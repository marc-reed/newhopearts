---
import { contentfulClient } from "../lib/contentful";
import Layout from '../layouts/Layout.astro';
import "../styles/global.css";
import type { EntrySkeletonType } from "contentful";

const entries = await contentfulClient.getEntries<EntrySkeletonType>({
  content_type: "blog",
  order: ['-fields.postDate'],
});



---

<Layout title="Blog Posts | New Hope Arts">
  <div style="margin-top: 2em; padding: 0 1rem;">
    <h1 style="text-align: center; margin-bottom: 2rem; color: #E20000;">Blog Posts</h1>
    
    <!-- Responsive Grid -->
    <div style="display: grid; grid-template-columns: repeat(auto-fill, minmax(300px, 1fr)); gap: 2rem; max-width: 1400px; margin: 0 auto;">
      {entries.items.map((item: any) => (
        <article style="background: white; border-radius: 12px; overflow: hidden; box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1); transition: transform 0.3s ease, box-shadow 0.3s ease; display: flex; flex-direction: column;" 
                 onmouseenter="this.style.transform='translateY(-8px)'; this.style.boxShadow='0 12px 20px rgba(0, 0, 0, 0.15)';"
                 onmouseleave="this.style.transform='translateY(0)'; this.style.boxShadow='0 4px 6px rgba(0, 0, 0, 0.1)';">
          
          <!-- Image -->
          {item.fields.image && (
            <a href={`/blog/${item.fields.slug}`} style="display: block; overflow: hidden; background: #f8f9fa;">
              <img
                src={item.fields.image.fields.file.url}
                alt={item.fields.image.fields.title || item.fields.title}
                style="width: 100%; height: 188px; object-fit: cover; transition: transform 0.3s ease;"
                onmouseenter="this.style.transform='scale(1.05)';"
                onmouseleave="this.style.transform='scale(1)';"
              />
            </a>
          )}
          
          <!-- Card Content -->
          <div style="padding: 1.5rem; flex: 1; display: flex; flex-direction: column;">
            <h2 style="margin: 0 0 1rem 0; font-size: 1.5rem; line-height: 1.3;">
              <a href={`/blog/${item.fields.slug}`} style="color: #E20000; text-decoration: none; transition: color 0.2s ease;"
                 onmouseenter="this.style.color='#B00000';"
                 onmouseleave="this.style.color='#E20000';">
                {item.fields.title}
              </a>
            </h2>
            
            <p style="color: #666; line-height: 1.6; margin: 0 0 1.5rem 0; flex: 1;">
              {typeof item.fields.description === 'string' 
                ? item.fields.description.substring(0, 150) + (item.fields.description.length > 150 ? '...' : '')
                : ''}
            </p>
            
            <a href={`/blog/${item.fields.slug}`} 
               style="display: inline-flex; align-items: center; gap: 0.5rem; color: #E20000; font-weight: 600; text-decoration: none; transition: gap 0.2s ease;"
               onmouseenter="this.style.gap='0.75rem';"
               onmouseleave="this.style.gap='0.5rem';">
              Read More
              <span style="font-size: 1.2rem;">â†’</span>
            </a>
          </div>
        </article>
      ))}
    </div>
  </div>
</Layout>


